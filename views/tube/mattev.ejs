<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="/js/tailwindcss.js"></script>
    <title>ã‚¨ãƒ©ãƒ¼</title>
<style>
        .controlPanel {
            display: none;
        }
        .controlPanel.open { display: block; }
</style>
    <script>
function changeServer() {
    const server = document.getElementById('serverSelect').value;
    showMessage(`ã‚µãƒ¼ãƒãƒ¼ã‚’${server}ã«å¤‰æ›´ã—ã¾ã™â˜‘ï¸`)
    window.location.href = `/wkt/watch/<%= videoId %>?server=${server}`;
}
function showMessage(text) {
    const alertMessage = document.createElement('div');
    alertMessage.classList.add(
        'fixed', 'top-4', 'right-4', 'bg-gradient-to-r', 
        'from-gray-800', 'to-gray-600', 'text-white', 
        'p-5', 'rounded-lg', 'shadow-xl', 'opacity-90', 
        'z-50', 'transform', 'scale-90', 'transition-transform', 
        'border-2', 'border-indigo-500'
    );
    alertMessage.innerHTML = `
        <span class="font-semibold">â„¹ï¸</span> <span>${text}</span>
    `;
    document.body.appendChild(alertMessage);
    setTimeout(() => {
        alertMessage.style.transform = 'translateX(0) scale(1)';
    }, 0);
    setTimeout(() => {
        alertMessage.style.opacity = '0';
        alertMessage.style.transform = 'translateX(100%) scale(1.1)';
        setTimeout(() => alertMessage.remove(), 1000);
    }, 3500);
}
$(document).ready(function() {
    $('#toggleControlPanel').click(() => $('#controlPanel').toggleClass('open'));
    $('#closeControlPanel').click(() => $('#controlPanel').toggleClass('open'));

    $('#saveSettings').click(function() {
        $('#controlPanel').toggleClass('open');
        const mode = $('input[name="playbackMode"]:checked').val();
        document.cookie = `playbackMode=${mode}; path=/; max-age=31536000`;
        showMessage(`å†ç”Ÿæ–¹æ³•ã‚’${mode}ã«å¤‰æ›´ã—ã¾ã™â˜‘ï¸`);
        window.location.href = `/wkt/redirect/mode/<%= videoId %>?mode=${mode}`;
    });
});
    </script>
</head>
  
<body class="bg-gray-900 text-white">
    <header class="bg-gray-800 p-4 flex justify-between items-center fixed top-0 left-0 w-full z-10">
        <form action="/wkt/s" method="get" class="w-1/2" id="searchForm">
            <input type="text" name="q" id="searchbox" placeholder="æ¤œç´¢" class="searchbox w-full p-2 rounded bg-gray-700 text-white">
        </form>
        <nav class="space-x-4">
            <a href="/wkt" class="text-gray-300 hover:text-white">ãƒ›ãƒ¼ãƒ </a>
            <a href="/wkt/trend" class="text-gray-300 hover:text-white">ãƒˆãƒ¬ãƒ³ãƒ‰</a>
            <a href="/wkt/cl/history" class="text-gray-300 hover:text-white">å±¥æ­´</a>
        </nav>
    </header>
    <div class="max-w-4xl mx-auto p-6 bg-gray-800 rounded-lg shadow-lg mt-20">
        <h1 class="text-3xl font-bold text-center mb-6">å‹•ç”»ã‚’å–å¾—ã§ãã¾ã›ã‚“</h1>
        <p class="text-center text-lg mb-6">ã‚¨ãƒ©ãƒ¼: <%= details %></p>
        <div class="flex w-full justify-center mb-6">
            <img src="/wkt/back/vi/<%= videoId %>/mqdefault.jpg" alt="å‹•ç”»ã®ã‚µãƒ ãƒã‚¤ãƒ«" class="rounded-lg shadow-md max-w-full">
        </div>
        <p class="text-center text-lg mb-6">ç¾åœ¨ã®ã‚µãƒ¼ãƒãƒ¼: <strong><%= baseUrl.replace('https://', '').replace('.glitch.me', '') %></strong></p>
        <div class="text-center">
            <label for="serverSelect" class="text-xl">ã‚µãƒ¼ãƒãƒ¼ã‚’å¤‰æ›´:</label>
            <select id="serverSelect" class="mt-2 p-3 bg-gray-700 text-white rounded-lg border border-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                <% serverUrls.forEach(server => { %>
                    <option value="<%= server.replace('https://', '').replace('.glitch.me', '') %>" class="bg-gray-800 hover:bg-gray-700"><%= server.replace('https://', '').replace('.glitch.me', '') %></option>
                <% }); %>
                <option value="direct" class="bg-gray-800 hover:bg-gray-700">direct</option>
            </select>
            <button onclick="changeServer()" class="mt-4 px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-300">å¤‰æ›´</button>
          </div><br>
        <p class="text-center text-lg mb-6">ã‚µãƒ¼ãƒãƒ¼ã‚’å¤‰ãˆãŸã‚Šã€å†èª­ã¿è¾¼ã¿ã—ãŸã‚Šã—ã¦ã¿ã¦ã­ã€‚</p>
        <button id="toggleControlPanel" class="mt-4 w-full bg-gray-700 py-2 rounded">è¨­å®šã‚’ã²ã‚‰ã</button>
    </div>
<div id="controlPanel" class="controlPanel bg-gray-900 text-white p-6 rounded-lg shadow-lg w-96 fixed bottom-10 right-10 border border-gray-700">
    <button id="closeControlPanel" class="absolute top-2 right-2 text-gray-400 hover:text-white text-2xl">Ã—</button>
    <h2 class="text-lg font-semibold mb-3">å†ç”Ÿæ–¹æ³•ã®å¤‰æ›´</h2>
    <p class="mb-4 text-gray-600">å‹•ç”»ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å†ç”Ÿæ–¹æ³•ã‚’è¨­å®šã§ãã¾ã™ã€‚åŸ‹ã‚è¾¼ã¿ã§è¦‹ã‚Œã‚‹ãªã‚‰åŸ‹ã‚è¾¼ã¿ã§è¦‹ãŸæ–¹ãŒè‰¯ã„ã§ã™ã‚ˆã€‚</p>
    <p class="mb-4 text-gray-600">ç¾åœ¨ã®å†ç”Ÿæ–¹æ³•: education</p>
    <div class="control-section mb-4">
        <div class="flex flex-col">
            <label class="flex items-start mb-2">
                <input type="radio" name="playbackMode" value="normal" class="mr-2 mt-1">
                <div>
                    <strong>é€šå¸¸</strong> - ã‚¹ãƒˆãƒªãƒ¼ãƒ URLã‚’ç”¨ã„ã¦å†ç”Ÿã—ã¾ã™ã€‚æœ€åˆã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã§ã€ã»ã¨ã‚“ã©ã®äººãŒä½¿ç”¨ã§ãã¾ã™ã€‚
                </div>
            </label>
            <label class="flex items-start mb-2">
                <input type="radio" name="playbackMode" value="edu" class="mr-2 mt-1">
                <div>
                    <strong>education</strong> - youtubeeducationã‚’åŸ‹ã‚è¾¼ã‚“ã§å†ç”Ÿã‚’è¡Œã„ã¾ã™ã€‚ä¸€éƒ¨ã®äººãŒä½¿ç”¨ã§ãã¾ã™ã€‚
                    <a href="/wkt/yt/edu/<%= videoId %>" class="text-blue-500 underline" target="_blank">å†ç”Ÿã§ãã‚‹ã‹ç¢ºã‹ã‚ã‚‹</a>ã€‚
                </div>
            </label>
            <label class="flex items-start mb-2">
                <input type="radio" name="playbackMode" value="nocookie" class="mr-2 mt-1">
                <div>
                    <strong>nocookie</strong> - youtubenocookieã‚’åŸ‹ã‚è¾¼ã‚“ã§å†ç”Ÿã‚’è¡Œã„ã¾ã™ã€‚ã“ã¡ã‚‰ã‚‚ä¸€éƒ¨ã®äººãŒä½¿ç”¨ã§ãã¾ã™ã€‚
                    <a href="/wkt/yt/nocookie/<%= videoId %>" class="text-blue-500 underline" target="_blank">å†ç”Ÿã§ãã‚‹ã‹ç¢ºã‹ã‚ã‚‹</a>ã€‚
                </div>
            </label>
        </div>
    </div>
    
    <button id="saveSettings" class="control-button w-full bg-gray-700 py-2 hover:text-white p-2 rounded mb-2">ğŸ’¾ è¨­å®šã‚’ä¿å­˜</button>
</div>
</body>
</html>
